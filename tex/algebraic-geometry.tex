% Defining schemes
\begin{topic}{ringed-space}{ringed space}
    A \textbf{ringed space} is a pair $(X, \mathcal{O}_X)$ consisting of a \tref{TO:topological-space}{topological space} $X$ and a \tref{sheaf}{sheaf} of rings $\mathcal{O}_X$ on $X$.
    
    A morphism of ringed spaces from $(X, \mathcal{O}_X)$ to $(Y, \mathcal{O}_Y)$ is a pair $(f, f^\#)$ of a continuous map $f : X \to Y$ and a map $f^\# : \mathcal{O}_Y \to f_* \mathcal{O}_X$ of sheaves of rings on $Y$.
    
    A ringed space $(X, \mathcal{O}_X)$ is a \textbf{locally ringed space} if for each point $x \in X$, the \tref{stalk}{stalk} $\mathcal{O}_{X,x}$ is a \tref{CA:local-ring}{local ring}.
    
    A morphism of locally ringed spaces is a morphism $(f, f^\#)$ of ringed spaces such that for each point $x \in X$ the induced map of local rings $f^\#_x : \mathcal{O}_{Y, f(x)} \to \mathcal{O}_{X, x}$ is a \textit{local morphism}, i.e. the pre-image of the maximal ideal of $\mathcal{O}_{X, x}$ is the maximal ideal of $\mathcal{O}_{Y, f(x)}$.
\end{topic}

\begin{topic}{spectrum}{spectrum}
    Let $R$ be a commutative ring. The \textbf{spectrum} of $R$ is the \tref{ringed-space}{locally ringed space} $(X, \mathcal{O}_X)$ defined as follows.
    \begin{itemize}
        \item The topological space $X$ is the set of \tref{CA:prime-ideal}{prime ideals} of $R$, whose closed sets are given precisely by the sets $V(I) = \{ \textup{prime ideals } \mathfrak{p} \text{ with } \mathfrak{p} \supset I \}$ for all ideals $I$ of $R$.
        
        \item The \tref{sheaf}{sheaf} of rings $\mathcal{O}_X$ is given as follows. For each open set $U \subset X$, $\mathcal{O}_X(U)$ is the set of functions $s : U \to \sqcup_{\mathfrak{p} \in U} R_\mathfrak{p}$ with $s(\mathfrak{p}) \in R_\mathfrak{p}$ for each $\mathfrak{p} \in U$, such that $s$ is locally a quotient of elements of $R$. This means that for each $\mathfrak{p} \in U$, there is a neighborhood $V \subset U$ of $\mathfrak{p}$, and elements $a, f \in R$ such that for each $\mathfrak{q} \in V$, $f \not\in \mathfrak{q}$ and $s(\mathfrak{q}) = a/f$ in $A_\mathfrak{q}$. The sets $\mathcal{O}_X(U)$ are indeed rings.
    \end{itemize}
    The spectrum of $R$ is denoted $\Spec R$.
\end{topic}

\begin{topic}{affine-scheme}{affine scheme}
    An \textbf{affine scheme} is a \tref{ringed-space}{locally ringed space} $(X, \mathcal{O}_X)$ which is isomorphic to the \tref{spectrum}{spectrum} of some ring.
\end{topic}

\begin{topic}{scheme}{scheme}
    A \textbf{scheme} is a \tref{ringed-space}{locally ringed space} $(X, \mathcal{O}_X)$ in which every point has an open neighborhood $U$ such that $(U, \mathcal{O}_X|_U)$ is an \tref{affine-scheme}{affine scheme}. A morphism of schemes is a morphism of locally ringed spaces.
    
    One calls $X$ the \textit{underlying topological space}, and $\mathcal{O}_X$ its \textit{structure sheaf}.
\end{topic}

% Scheme properties
\begin{topic}{reduced-scheme}{reduced scheme}
    A \tref{scheme}{scheme} $X$ is \textbf{reduced} if for every open subset $U \subset X$ the ring $\mathcal{O}_X(U)$ has no \tref{CA:nilpotent-element}{nilpotent} elements.
    
    Equivalently, this is the case if all stalks $\mathcal{O}_{X, x}$ have no nilpotent elements.
\end{topic}

\begin{topic}{integral-scheme}{integral scheme}
    A \tref{scheme}{scheme} $X$ is \textbf{integral} if for every open subset $U \subset X$ the ring $\mathcal{O}_X(U)$ is a \tref{CA:domain}{domain}.
    
    Equivalently, this is the case if $X$ is \tref{reduced-scheme}{reduced} and \tref{TO:irreducible}{irreducible}.
\end{topic}

\begin{topic}{noetherian-scheme}{noetherian scheme}
    A \tref{scheme}{scheme} $X$ is \textbf{locally noetherian} if it can be covered by open affine subsets $\Spec A_i$, where each $A_i$ is a \tref{CA:noetherian-ring}{noetherian ring}. It is \textbf{noetherian} if it is locally noetherian and \tref{TO:quasi-compact}{quasi-compact}.
\end{topic}

\begin{topic}{finite-type}{(locally) of finite type}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{of finite type at $x \in X$} if there exist affine opens $U = \Spec A \subset X$ containing $x$ and $V = \Spec B \subset Y$ with $f(U) \subset V$ such that $A$ is a \tref{CA:finite-type}{finitely generated} $B$-algebra (via the induced map $B \to A$).
    
    The morphism $f$ is \textbf{locally of finite type} if it is of finite type at each $x \in X$, and it is \textbf{of finite type} if it is locally of finite type and \tref{TO:quasi-compact}{quasi-compact}.
\end{topic}

\begin{topic}{finite-presentation}{(locally) of finite presentation}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{of finite presentation at $x \in X$} if there exists affine opens $U = \Spec A \subset X$ containing $x$ and $V = \Spec B \subset Y$ with $f(U) \subset V$ such that $A$ is a \tref{CA:finite-presentation}{finitely presented} $B$-algebra (via the induced map $B \to A$).
    
    The morphism $f$ is \textbf{locally of finite presentation} if it is of finite presentation at each $x \in X$, and it is \textbf{of finite presentation} if it is locally of finite presentation, \tref{TO:quasi-compact}{quasi-compact}, and \tref{separated-morphism}{quasi-separated}.
\end{topic}

\begin{topic}{finite-morphism}{finite morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{finite} if there exists a covering of $Y$ by open affine subsets $V_i = \Spec B_i$, such that for each $i$, $f^{-1}(V_i)$ is affine, equal to $\Spec A_i$, where $A_i$ is a $B_i$-algebra which is a finitely generated $B_i$-module.
\end{topic}

\begin{topic}{quasi-finite-morphism}{quasi-finite morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{quasi-finite} if it is of \tref{finite-type}{finite type}, and every point $x \in X$ is isolated in its fiber $f^{-1}(f(x))$, i.e. every fiber is a discrete finite set.
\end{topic}

\begin{topic}{open-immersion}{open immersion}
    An \textbf{open immersion} is a morphism $i : U \to X$ of \tref{scheme}{schemes} which induces an isomorphism of $U$ with an open subscheme of $X$.
\end{topic}

\begin{topic}{closed-immersion}{closed immersion}
    A \textbf{closed immersion} is a morphism $i : Z \to X$ of \tref{scheme}{schemes} such that $i$ induces a \tref{TO:homeomorphism}{homeomorphism} of the underlying space of $Z$ onto a closed subset of that of $X$, and furthermore the induced map $i^\# : \mathcal{O}_X \to i_*\mathcal{O}_Z$ of sheaves on $X$ is surjective.
\end{topic}

\begin{topic}{immersion}{immersion}
    An \textbf{immersion} is a morphism $Y \to X$ of \tref{scheme}{schemes} which factors as $j \circ i$, where $i$ is a \tref{closed-immersion}{closed immersion} and $j$ is an \tref{open-immersion}{open immersion}.
    \[ Y \xrightarrow{i} U \xrightarrow{j} X \]
\end{topic}

\begin{topic}{affine-morphism}{affine morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{affine} if the inverse image of every affine open in $Y$ is an affine open of $X$. 
\end{topic}

\begin{topic}{normal-scheme}{normal scheme}
    A \tref{scheme}{scheme} $X$ is \textbf{normal} if all of its local rings are integrally closed domains.
    
    Every scheme can be `normalized'.
\end{topic}

\begin{topic}{separated-morphism}{(quasi) separated morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{quasi-separated} if the diagonal $\Delta_{X/Y} : X \to X \times_Y X$ is quasi-compact, and it is \textbf{separated} if the diagonal $\Delta_{X/Y}$ is a closed immersion.
    
    A scheme $X$ is \textbf{(quasi-)separated} if the morphism $X \to \Spec \ZZ$ is (quasi-)separated.
\end{topic}

\begin{example}{separated-morphism}
    Any morphism of affine schemes is separated. Namely, for any $f : \Spec A \to \Spec B$, the diagonal $\Delta$ corresponds to the ring map $A \otimes_B A \to A : a \otimes a' \mapsto aa'$, which is clearly surjective. In this way $A$ is seen as a quotient of $A \otimes_B A$, so $\Delta$ is a closed immersion.
\end{example}

\begin{example}{separated-morphism}
    Let $X$ be the affine line with two origins, that is, glue two copies of $\AA_k^1$ along $\AA_k^1 - \{ 0 \}$. We claim that $X$ is not separated over $k$. Namely, consider the map $\AA^1_k \to X \times_k X$ obtained from the two different maps $\AA_k^1 \to X$. Then the inverse image of the diagonal is $\AA_k^1 - \{ 0 \}$, which is not closed. Hence, the diagonal is not closed and $\Delta$ is not a closed immersion.
\end{example}

\begin{topic}{proper-morphism}{proper morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{proper} if it is \tref{separated-morphism}{separated}, \tref{finite-type}{of finite type} and \tref{TO:universally-closed}{universally closed}.
\end{topic}

\begin{example}{proper-morphism}
    The morphism $\AA_k^1 \to \Spec k$ is not proper as it is not universally closed. Namely, the projection $\AA^1_k \times \AA^1_k \to \AA^1_k$ sends the closed set $\{ xy - 1 \}$ to $\AA^1_k - \{ 0 \}$ and thus cannot be a closed mapping. However, the morphism is clearly of finite type, and also separated as the diagonal $\Delta : \AA^1_k \to \AA^1_k \times \AA^1_k$ is closed, it is given by $\{ x - y = 0 \}$.
\end{example}

\begin{example}{proper-morphism}
    Let $X$ be the affine line with double origin, i.e. two copies of $\AA^1$ glued along $\AA^1 \backslash \{ 0 \}$. Then $X \to \AA^1$ is of finite type and universally closed (the latter as $X_R \to \AA^1_R$ is closed for all rings $R$). However, $X \to \AA^1$ is not separated and hence not proper. For this we need to show $\Delta_{X / \AA^1} : X \to X \times_{\AA^1} X$ is not a closed immersion. Consider $\AA^1 \to X \times_{\AA^1} X$ induced from the two maps different maps $\AA^1 \to X$, and note that the inverse image of the diagonal is $\AA^1 \backslash \{ 0 \}$ which is not closed. Hence the diagonal is not closed.
\end{example}

\begin{topic}{projective-morphism}{(quasi) projective morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{projective} if it factors as
    \[ X \xrightarrow{i} \PP^n_Y \xrightarrow{p} Y , \]
    with $i$ a \tref{closed-immersion}{closed immersion} and $p$ the projection.
    
    It is \textbf{quasi-projective} if it factors as
    \[ X \xrightarrow{j} X' \xrightarrow{g} Y , \]
    with $j$ an \tref{open-immersion}{open immersion} and $g$ a projective morphism.
\end{topic}

\begin{topic}{regular-scheme}{regular scheme}
    A \tref{scheme}{scheme} $X$ is \textbf{regular} if it is \tref{noetherian-scheme}{locally noetherian} and all of its stalks are \tref{CA:regular-ring}{regular local rings}.
\end{topic}

\begin{topic}{variety}{variety}
    An (abstract) \textbf{variety} is an \tref{integral-scheme}{integral} \tref{separated-morphism}{separated} \tref{scheme}{scheme} of \tref{finite-type}{finite type} over an algebraically closed field $k$.
\end{topic}

\begin{topic}{complete-variety}{complete variety}
    A \tref{variety}{variety} over $k$ is \textbf{complete} if it is \tref{proper-morphism}{proper} over $k$.
\end{topic}

% -- O_X modules --
\begin{topic}{O-module}{sheaf of O-modules}
    Let $(X, \mathcal{O}_X)$ be a \tref{ringed-space}{ringed space}. A \textbf{sheaf of $\mathcal{O}_X$-modules}, or simply $\mathcal{O}_X$-module, is a \tref{sheaf}{sheaf} $\mathcal{F}$ on $X$, such that for each open set $U \subset X$, the group $\mathcal{F}(U)$ is an $\mathcal{O}_X(U)$-module, and for each inclusion of open sets $V \subset U$, the restriction morphism $\mathcal{F}(U) \to \mathcal{F}(V)$ is an $\mathcal{O}_X(U)$-module morphism (here $\mathcal{F}(V)$ is seen as an $\mathcal{O}_X(U)$-module via $\mathcal{O}_X(U) \to \mathcal{O}_X(V)$).
    
    A morphism of $\mathcal{O}_X$-modules $\mathcal{F} \to \mathcal{G}$ is a morphism of sheaves, such that for each open set $U \subset X$, the map $\mathcal{F}(U) \to \mathcal{G}(U)$ is an $\mathcal{O}_X(U)$-module morphism.
\end{topic}

\begin{topic}{free-sheaf}{(locally) free sheaf}
    Let $(X, \mathcal{O}_X)$ be a \tref{ringed-space}{ringed space}. An \tref{O-module}{$\mathcal{O}_X$-module} $\mathcal{F}$ is \textbf{free} if it is isomorphic to a direct sum of copies of $\mathcal{O}_X$.
    
    It is \textbf{locally free} if $X$ can be covered by open sets $U$ for which $\mathcal{F}|_U$ is free. In that case, the \textit{rank} of $\mathcal{F}$ on such an open set is the number of copies of $\mathcal{O}_X$. If $X$ is connected, this rank is the same everywhere.
\end{topic}

\begin{topic}{invertible-sheaf}{invertible sheaf}
    Let $(X, \mathcal{O}_X)$ be a \tref{ringed-space}{ringed space}. An \textbf{invertible sheaf} $\mathcal{L}$ on $X$ is a \tref{free-sheaf}{locally free} \tref{O-module}{$\mathcal{O}_X$-modules} of rank 1.
\end{topic}

\begin{topic}{sheaf-of-ideals}{sheaf of ideals}
    Let $(X, \mathcal{O}_X)$ be a \tref{ringed-space}{ringed space}. A \textbf{sheaf of ideals} is an $\mathcal{O}_X$-module $\mathcal{I}$ which is a subsheaf of $\mathcal{O}_X$.
\end{topic}

\begin{topic}{sheaf-associated-to-module}{sheaf associated to module}
    Let $R$ be a ring and let $M$ be an $R$-module. The \textbf{sheaf associated} to $M$ on $X = \Spec R$, denoted $\tilde{M}$, is defined by the gluing data: to each distinguished open $X_f = \{ f \ne 0 \}$ is assigned the localized $R_f$-module $M_f$. For each $X_f \subset X_g$ there is the natural map $M_g \to M_f$. In particular, $\tilde{R} = \mathcal{O}_X$.
    
    For the projective case, let $S$ be a graded ring and $M$ a graded $S$-module. The \textbf{sheaf associated} to $M$ on $X = \Proj S$, denoted $\tilde{M}$, is defined by the gluing data: for each homogeneous $f \in S$, we have $\tilde{M}|_{\{ f \ne 0\}} \simeq (M_f)_0$.
\end{topic}

\begin{topic}{coherent-sheaf}{(quasi) coherent sheaf}
    Let $X$ be a \tref{scheme}{scheme}. A \tref{O-module}{sheaf of $\mathcal{O}_X$-modules} $\mathcal{F}$ is \textbf{quasi-coherent} if $X$ can be covered by open affine subsets $U_i = \Spec R_i$, such that for each $i$, the restriction $\mathcal{F}|_{U_i}$ is isomorphic to $\tilde{M}_i$ for some $R_i$-module $M_i$.
    
    Furthermore, $\mathcal{F}$ is \textbf{coherent} is each $M_i$ can be taken to be a finitely generated $R_i$-module.
\end{topic}

\begin{topic}{ideal-sheaf}{ideal sheaf}
    Let $i : Y \to X$ be a \tref{closed-immersion}{closed immersion} of \tref{scheme}{schemes}. The \textbf{ideal sheaf} $\mathcal{I}$ of $Y$ is the kernel of $i^\# : \mathcal{O}_X \to i_* \mathcal{O}_Y$. In particular, this is a \tref{sheaf-of-ideals}{sheaf of ideals} on $X$.
    \[ 0 \to \mathcal{I} \to \mathcal{O}_X \to i_* \mathcal{O}_Y \to 0 . \]
\end{topic}

\begin{topic}{twisting-sheaf}{twisting sheaf}
    Let $S$ be a graded ring and let $X = \Proj S$. For any $n \in \ZZ$, the \textbf{twisting sheaf} $\mathcal{O}_X(n)$ is the \tref{sheaf-associated-to-module}{sheaf associated} to $S(n)$ (recall: $S(n)_d = S_{d + n}$).
    
    For any sheaf of \tref{O-module}{$\mathcal{O}_X$-modules} $\mathcal{F}$, the \textbf{twisted sheaf} $\mathcal{F}(n)$ is given by $\mathcal{F} \otimes_{\mathcal{O}_X} \mathcal{O}_X(n)$.
    
    Note that sheaves $\mathcal{O}_X(n)$ are all \tref{invertible-sheaf}{invertible} sheaves, and that $\mathcal{O}_X(n) \otimes \mathcal{O}_X(m) \simeq \mathcal{O}_X(n + m)$.
\end{topic}

% \begin{topic}{ample-invertible-sheaf}{(very) ample invertible sheaf}
%     Let $X$ be a \tref{scheme}{scheme} over $S$. An \tref{invertible-sheaf}{invertible} sheaf $\mathcal{L}$ on $X$ is called \textbf{very ample} relative to $S$, if there is an \tref{immersion}{immersion} $i : X \to \PP_S^n$ for some $n$, such that $\mathcal{L} \simeq i^*(\mathcal{O}_{\PP^_S^n}(1))$.
    
%     If $X$ is scheme of finite type over a noetherian ring $A$, then any $\mathcal{L}$ is ample if and only if $\mathcal{L}^m$ is very ample over $\Spec A$ for some $m > 0$.
% \end{topic}

\begin{topic}{geometrically-regular}{geometrically regular}
    Let $X$ be a \tref{noetherian-scheme}{locally noetherian} \tref{scheme}{scheme} over a field $k$. Then $X$ is \textbf{geometrically regular at $x \in X$} over $k$ if for every finitely generated field extension $k \subset k'$ and any $x' \in X_{k'}$ lying over $x$, the local ring $\mathcal{O}_{X_{k'}, x'}$ is \tref{CA:regular-ring}{regular}.
    
    The scheme $X$ is \textbf{geometrically regular} over $k$ if $X$ it is so at all points $x \in X$.
\end{topic}

\begin{topic}{smooth-morphism}{smooth morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{smooth} if
    \begin{itemize}
        \item it is \tref{finite-presentation}{locally of finite presentation},
        \item it is \tref{flat-morphism}{flat},
        \item all the fibers $X_y$ are \tref{geometrically-regular}{geometrically-regular} over the residue field $k(y)$.
    \end{itemize}
\end{topic}

\begin{example}{smooth-morphism}
    The natural map $\Spec k[x, y, t] / (xy - t) \to \Spec k[t]$ is not smooth since the fiber $X_0 = \{ xy = 0 \}$ over $t = 0$ is not geometrically regular.
\end{example}

\begin{topic}{unramified-morphism}{unramified morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{unramified} if
    \begin{itemize}
        \item it is \tref{finite-presentation}{locally of finite presentation},
        \item the residue field $k(x)$ is a \tref{CA:separable-field-extension}{separable algebraic extension} of $k(f(x))$, for all $x \in X$,
        \item $f^\#(\mathfrak{m}_{f(x)}) \mathcal{O}_{X, x} = \mathfrak{m}_x$ for all $x \in X$.
    \end{itemize}
\end{topic}

\begin{topic}{etale-morphism}{étale morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{étale} if it is \tref{flat-morphism}{flat}, \tref{unramified-morphism}{unramified} and \tref{finite-presentation}{locally of finite presentation}.
\end{topic}

\begin{topic}{formally-smooth}{formally smooth morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{formally smooth} if for every ring $A$, ideal $I \subset A$ with $I^2 = 0$, and commutative diagram
    \[ \begin{tikzcd} \Spec A/I \arrow{r} \arrow{d} & X \arrow{d}{f} \\ \Spec A \arrow{r} \arrow[dashed]{ur} & Y \end{tikzcd} \]
    there exists a morphism $\Spec A \to X$ making the diagram commute.
\end{topic}

\begin{example}{formally-smooth}
    The variety $\Spec(k[x, y]/(xy))$ is not formally smooth over $\Spec(k)$. Namely, take $A = k[x, y] / (xy)^2$ and $I = (xy)$. Then there exists no morphism $k[x, y]/(xy) \to k[x, y]/(xy)^2$ completing the diagram.
\end{example}

\begin{topic}{formally-unramified}{formally unramified morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{formally unramified} if for every ring $A$, ideal $I \subset A$ with $I^2 = 0$, and commutative diagram
    \[ \begin{tikzcd} \Spec A/I \arrow{r} \arrow{d} & X \arrow{d}{f} \\ \Spec A \arrow{r} \arrow[dashed]{ur} & Y \end{tikzcd} \]
    there is at most one morphism $\Spec A \to X$ making the diagram commute.
\end{topic}

\begin{example}{formally-unramified}
    The affine line $\AA^1_k = \Spec(k[x])$ is not formally unramified over $k$. Namely, take $A = k[\varepsilon] / (\varepsilon^2)$ and $I = (\varepsilon)$. Then for any $k[x] \to k[\varepsilon]/(\varepsilon) = k : x \mapsto x_0$ there exists a whole family of morphisms $k[x] \to k[t]/(t^2)$ completing the diagram: one can send $x \mapsto x_0 + \alpha t + (t^2)$ for any $\alpha \in k$.
\end{example}

\begin{topic}{formally-etale}{formally étale morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{formally étale} if for every ring $A$, ideal $I \subset A$ with $I^2 = 0$, and commutative diagram
    \[ \begin{tikzcd} \Spec A/I \arrow{r} \arrow{d} & X \arrow{d}{f} \\ \Spec A \arrow{r} \arrow[dashed]{ur} & Y \end{tikzcd} \]
    there exists a unique morphism $\Spec A \to X$ making the diagram commute.
    
    That is, $f$ is formally smooth if it is \tref{formally-smooth}{formally smooth} and \tref{formally-unramified}{formally unramified}.
\end{topic}

\begin{topic}{flat-morphism}{flat morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{flat} if for every $x \in X$, the local ring $\mathcal{O}_{X, x}$ is \tref{CA:flat-module}{flat} as an $\mathcal{O}_{Y, f(x)}$-module.
\end{topic}

\begin{example}{flat-morphism}
    The morphism $\Spec k[x, y, t] / (xy - t) \to \Spec k[t]$ is flat. This follows from $k[x, y, t] / (xy - t)$ being flat over $k[t]$, because it is a free $k[t]$-module:
    \[ k[x, y, t] / (xy - t) \simeq k[t] \oplus \bigoplus_{i \ge 1} k[t] \cdot x^i \oplus \bigoplus_{i \ge 1} k[t] \cdot y^i \]
    However, the morphism
    \[ \Spec k[x, y, t] / (txy - t) \to \Spec k[t] \]
    is not flat. Namely, at the maximal ideal $(x, y, t)$, we have that $(k[x, y, t] / (txy - t))_{(x, y, t)}$ is not flat over $k[t]_{(t)}$, as tensoring the injective map $k[t]_{(t)} \xrightarrow{\cdot t} k[t]_{(t)}$ does not give an injective map: $t$ is a zero-divisor in $k[x, y, t] / (txy - t)$.
\end{example}

\begin{topic}{dominant-morphism}{dominant morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{dominant} if the image of $f$ is a \tref{TO:dense}{dense} subset of $Y$.
\end{topic}

\begin{topic}{serre-duality}{Serre duality}
    Let $X$ be a smooth projective scheme of dimension $n$, and let $\omega_X$ be its canonical sheaf. Then \textbf{Serre duality} states that for every coherent sheaf $\mathcal{F}$ on $X$ there is a natural isomorphism
    \[ H^i(X, \mathcal{F}^\vee \otimes \omega_X) \simeq H^{n - i}(X, \mathcal{F})^\vee . \]
\end{topic}

\begin{topic}{picard-group}{Picard group}
    The \textbf{Picard group} $\text{Pic}(X)$ of a \tref{scheme}{scheme} $X$ is the \tref{GT:abelian-group}{abelian group} of isomorphism classes of \tref{invertible-sheaf}{invertible sheaves} on $X$, where addition is given by the tensor product
    \[ [\mathcal{L}_1] + [\mathcal{L}_2] = [\mathcal{L}_1 \otimes \mathcal{L}_2] . \]
\end{topic}

\begin{topic}{picard-functor}{Picard functor}
    Let $f : X \to S$ be a \tref{scheme}{scheme} over $S$. The \textbf{absolute Picard functor} is the functor that assigns to any $T \to S$ the \tref{picard-group}{Picard group} $\text{Pic}(X \times_S T)$,
    \[ \text{Pic}_X : \textbf{Sch}/S \to \textbf{Ab}, \quad T \mapsto \text{Pic}(X \times_S T) . \]
    The \textbf{relative Picard functor} is the functor
    \[ \text{Pic}_{X/S} : \textbf{Sch}/S \to \textbf{Ab}, \quad T \mapsto \text{Pic}(X \times_S T) / f_T^* \text{Pic}(T) . \]
\end{topic}

% \begin{example}{picard-group}
%     \begin{itemize}
%         \item $\text{Pic}(\PP^n) \simeq \ZZ$
%         \item $\text{Pic}(\AA^n) \simeq 0$
%     \end{itemize}
% \end{example}

% \begin{example}{picard-group}
%     \[ \text{Pic}(X) \simeq H^1(X, \mathcal{O}_X^*) \]
% \end{example}

\begin{topic}{euler-sequence}{Euler sequence}
    Let $A$ be any ground ring. The \textbf{Euler sequence} is the following exact sequence of sheaves on $\PP_A^n$:
    \[ 0 \rightarrow \Omega^1_{\PP^n_A/A} \rightarrow \mathcal{O}_{\PP_A^n}(-1)^{\oplus n + 1} \rightarrow \mathcal{O}_{\PP_A^n} \rightarrow 0 , \]
    where the latter map is given by the map of graded $A$-modules
    \[ S(-1)^{\oplus n + 1} \to S : e_i \mapsto x_i \qquad \text{ with } S = A[x_0, x_1, \ldots, x_n] . \]
    One can check on the affine patches that the kernel is isomorphic to the relative differential module.
\end{topic}

\begin{topic}{complete-intersection}{complete intersection}
    A \tref{variety}{variety} $X$ of dimension $r$ in projective space $\PP^n$ is a \textbf{complete intersection} if the corresponding ideal $I(X)$ can be generated by $n - r$ elements.
\end{topic}

\begin{example}{complete-intersection}
    The twisted cubic is not a complete intersection:
    \[ X = \text{Proj}\left(\frac{k[x, y, z, w]}{(xw - yz, y^2 - xz, z^2 - yw)}\right) \subset \PP_k^3 \]
    Namely, its dimension is one, but its ideal cannot be generated by $3 - 1 = 2$ elements.
\end{example}

\begin{topic}{tangent-sheaf}{tangent sheaf}
    Let $X$ be a non-singular \tref{variety}{variety} over $k$. The \textbf{tangent sheaf} of $X$ is defined to be
    \[ \mathcal{T}_X = \mathcal{H}\text{om}(\Omega_{X/k}, \mathcal{O}_X) . \]
\end{topic}

\begin{topic}{canonical-sheaf}{canonical sheaf}
    Let $X$ be a non-singular \tref{variety}{variety} over $k$ of dimension $n$. The \textbf{canonical sheaf} of $X$ is defined to be
    \[ \omega_X = \wedge^n \Omega_{X/k} . \]
\end{topic}

\begin{topic}{geometric-genus}{geometric genus}
    Let $X$ be a non-singular projective \tref{variety}{variety} over $k$. Its \textbf{geometric genus} is defined as
    \[ p_g = \dim_k H^0(X, \omega_X) , \]
    where $\omega_X$ is the \tref{canonical-sheaf}{canonical sheaf} of $X$.
\end{topic}

\begin{topic}{normal-sheaf}{(co)normal sheaf}
    Let $X$ be a non-singular \tref{variety}{variety} over $k$, and $Y$ a non-singular closed irreducible subvariety defined by the sheaf of ideals $\mathcal{I}$. The \textbf{conormal sheaf} of $Y$ in $X$ is the sheaf
    \[ \mathcal{I}/\mathcal{I}^2 . \]
    Its dual
    \[ \mathcal{N}_{Y/X} = \mathcal{H}\text{om}(\mathcal{I}/\mathcal{I}^2, \mathcal{O}_X) \]
    is called the \textbf{normal sheaf} of $Y$ in $X$. It is locally free of rank $r = \text{codim}(Y)$.
\end{topic}

\begin{topic}{geometric-point}{geometric point}
    A \textbf{geometric point} of a \tref{scheme}{scheme} $X$ defined over a field $k$ is a morphism
    \[ \Spec \overline{k} \to X , \]
    where $\overline{k}$ denotes an \tref{CA:algebraic-closure}{algebraic closure} of $k$.
\end{topic}

\begin{topic}{fppf-covering}{fppf covering}
    An \textbf{fppf covering} of a \tref{scheme}{scheme} $X$ is a family of morphisms $\left\{ f_i : X_i \to X \right\}_{i \in I}$ that are all \tref{flat-morphism}{flat}, \tref{finite-presentation}{locally of finite presentation}, and jointly surjective, i.e. $X = \bigcup_{i \in I} f_i(X_i)$.
    
    `fppf' stands for \textit{fidèlement plat de présentation finie}.
\end{topic}

\begin{example}{fppf-covering}
    Any Zariski, étale, smooth or syntomic covering is an fppf covering.
\end{example}

\begin{example}{fppf-covering}
    Consider the following cover of the affine line $\AA^1_k$,
    \[ \left\{ \AA^1_k - \{ 0 \} \to \AA^1_k, \qquad \Spec(\mathcal{O}_{\AA^1_k, 0}) \to \AA^1_k \right\} . \]
    It is not an fppf covering since the second morphism is not locally of finite presentation.
    
    (However, it is an \tref{fpqc-covering}{fpqc covering}.)
\end{example}

\begin{topic}{fpqc-covering}{fpqc covering}
    An \textbf{fpqc covering} of a \tref{scheme}{scheme} $X$ is a family of morphisms $\left\{ f_i : X_i \to X \right\}_{i \in I}$ that are all \tref{flat-morphism}{flat}, and such that for every affine open $U \subset X$ there exists a finite subset $J \subset I$ and affine opens $V_j \subset X_j$ for each $j \in J$ such that $U = \bigcup_{j \in J} f_j(V_j)$. That is, every affine open in $X$ can be covered by finitely many affine opens from the $X_i$.
    
    `fpqc' stands for \textit{fidèlement plat et quasi-compact}.
\end{topic}

\begin{example}{fpqc-covering}
    Any \tref{fppf-covering}{fppf covering} $\{ f_i : X_i \to X \}_{i \in I}$ is an fpqc covering. By assumption the $f_i$ are flat. Let $U \subset X$ be an affine open. Write $f_i^{-1}(U) = \cup_{j \in J_i} U_{ij}$ for some affine opens $U_{ij} \subset X_i$. Each $f_i$ flat and locally of finite presentation, hence open. So, $U = \cup_{i \in I} \cup_{j \in J_i} f_i(U_{ij})$ is an open cover for $U$. Now, $U$ is affine and thus quasi-compact, so there is a finite subcover.
\end{example}

\begin{example}{fpqc-covering}
    A morphism $\Spec A \to \Spec B$ is an fpqc covering if and only if $A \to B$ is faithfully flat.
\end{example}

\begin{example}{fpqc-covering}
    Let $X = \AA^1_k$ be the affine line over an infinite field $k$, and consider the natural morphism
    \[ f : \bigsqcup_{x \in X} \Spec(\mathcal{O}_{X, x}) \to X . \]
    Altough it is flat and surjective, it does not define an fpqc covering of $X$, since any affine open of $\bigsqcup_{x \in X} \Spec(\mathcal{O}_{X, x})$ can only consist of finitely many points (because affines are quasi-compact).
\end{example}

\begin{topic}{faithfully-flat-morphism}{faithfully flat morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{faithfully flat} if it is both \tref{flat-morphism}{flat} and surjective.
\end{topic}

\begin{topic}{big-small-site}{big/small site}
    Let $X$ be a \tref{scheme}{scheme}, and let $\tau$ be any of the properties in $\{$ Zariski, étale, smooth, fppf, fpqc $\}$.
    
    The \textbf{big $\tau$-site} of $X$ is the \tref{CT:site}{site} $(\textbf{Sch}/X)_\tau$ of schemes over $X$ with the $\tau$-topology.
    
    The \textbf{small $\tau$-site} of $X$ is the full subcategory $X_\tau$ of $(\textbf{Sch}/X)_\tau$ whose objects are schemes $T$ over $X$ whose structure morphism $T \to X$ is part of a $\tau$-covering.
\end{topic}

\begin{topic}{projection-formula}{projection formula}
    Let $f : X \to Y$ be a morphism of \tref{scheme}{schemes}, $\mathcal{F}$ an $\mathcal{O}_X$-module, and $\mathcal{E}$ a \tref{free-sheaf}{locally free} $\mathcal{O}_Y$-module. The \textbf{projection formula} states a natural isomorphism
    \[ f_*\left(\mathcal{F} \otimes_{\mathcal{O}_X} f^* \mathcal{E} \right) \simeq f_*\left(\mathcal{F}\right) \otimes_{\mathcal{O}_Y} \mathcal{E} . \]
\end{topic}

\begin{topic}{rational-map}{rational map}
    A \textbf{rational map} $f : X \dashrightarrow Y$ between (\tref{TO:irreducible}{irreducible}) \tref{variety}{varieties} $X$ and $Y$ is an equivalence class of pairs $(U, f_U)$, where $U \subset X$ open and non-empty, $f_U : U \to Y$ a morphism, and where two pairs $(U, f_U)$ and $(V, f_V)$ are equivalent if their restriction to $U \cap V$ coincides.
\end{topic}

\begin{topic}{birational-map}{birational map}
    A \textbf{birational map} between (\tref{TO:irreducible}{irreducible}) \tref{variety}{varieties} $X$ and $Y$ is a \tref{rational-map}{rational map} $f : X \dashrightarrow Y$ which has a rational inverse. That is, there exists a rational map $g : Y \dashrightarrow X$ such that $gf = \id_X$ and $fg = \id_Y$ as rational maps.
    
    If there is a birational map from $X$ to $Y$, then $X$ and $Y$ are called \textbf{birationally equivalent}, or simply \textbf{birational}.
\end{topic}

\begin{example}{birational-map}
    The circle $X = \{ x^2 + y^2 = 1 \}$ in the affine plane is birational to the affine line $\AA^1$, since the rational map
    \[ f : \AA^1 \dashrightarrow X, \quad t \mapsto \left(\frac{2t}{1 + t^2}, \frac{1 - t^2}{1 + t^2}\right) \]
    has a rational inverse
    \[ g : X \dashrightarrow \AA^1, \quad (x, y) \mapsto \frac{1 - y}{x} . \]
\end{example}

\begin{example}{birational-map}
    Affine space $\AA^n$ is birational to projective space $\PP^n$ since the inclusion
    \[ i : \AA^n \to \PP^n, \quad (x_1, x_2, \ldots, x_n) \mapsto (1 : x_1 : \cdots : x_n) \]
    has rational inverse
    \[ j : \PP^n \dashrightarrow \AA^n, \quad (X_0 : X_1 : \cdots : X_n) \mapsto \left(\frac{X_1}{X_0}, \frac{X_2}{X_0}, \cdots, \frac{X_n}{X_0}\right) . \]
\end{example}

\begin{topic}{rational-variety}{rational variety}
    A \tref{variety}{variety} is called \textbf{rational} if it is \tref{birational-map}{birationally equivalent} to affine space (or equivalently, to projective space) of some dimension.
\end{topic}

\begin{topic}{syntomic-morphism}{syntomic morphism}
    A morphism $f : X \to Y$ of \tref{scheme}{schemes} is \textbf{syntomic at $x \in X$} if there exists an affine open neighborhood $U = \Spec A \subset X$ of $x$ and an affine open $V = \Spec B$ with $f(U) \subset V$ such that the induced ring morphism $B \to A$ is \textit{syntomic}, i.e. of \tref{CA:finite-presentation}{finite presentation}, makes $A$ into a \tref{CA:flat-module}{flat} \tref{CA:module}{$B$-module}, and all the fiber rings $A \otimes_B k(\mathfrak{p})$ are local complete intersections.
    
    The morphism $f$ is \textbf{syntomic} if it is syntomic at all points $x \in X$.
\end{topic}

\begin{topic}{galois-cover}{Galois cover}
    A morphism $f : X \to S$ of \tref{scheme}{schemes} is a \textbf{Galois cover} if it is \tref{finite-morphism}{finite}, \tref{faithfully-flat-morphism}{faithfully flat}, and such that there exists a finite group $\Gamma$ of $S$-automorphisms, such that
    \[ \Gamma \times X \to X \times_S X, \quad (\sigma, x) \mapsto (x, \sigma(x)) \]
    is an isomorphism.
\end{topic}

\begin{example}{galois-cover}
    Let $\ell / k$ be a \tref{CA:galois-extension}{Galois extension} with \tref{CA:galois-group}{Galois group} $G = \text{Gal}(\ell/k)$. Then there is an isomorphism
    \[ \ell \otimes_k \ell \to \prod_{\sigma \in G} \ell, \quad a \otimes b \mapsto (a \sigma(b))_{\sigma \in G} \]
    which shows that
    \[ G \times \Spec(\ell) \to \Spec(\ell) \times_{\Spec(k)} \Spec(\ell) \]
    is an isomorphism, and thus $\Spec(\ell) \to \Spec(k)$ is a Galois cover.
\end{example}

\begin{example}{galois-cover}
    Consider $f : X \to S$ with $X = S = \PP^1_k$ given by $(x : y) \mapsto (x^2 : y^2)$, and suppose that $\text{char}(k) \ne 2$. Then we see that
    \[ X \times_S X = \{ (x_1 : y_1), (x_2 : y_2) \in \PP^1_k : (x_1^2 : y_1^2) = (x_2^2 : y_2^2) \} \]
    is the disjoint union of $\{ (x_1 : y_2) = (x_2 : y_2) \}$ and $\{ (x_1 : y_2) = (x_1 : -y_2) \}$, and thus $f$ is a Galois cover.
\end{example}

\begin{example}{galois-cover}
    Let $E$ be an elliptic curve over $k$, and $n$ an integer invertible in $k$. Consider the map $[n] : E \to E$ given by multiplication by $n$. We have an isomorphism
    \[ E \times_E E = \{ (x, y) \in E^2 : nx = ny \} \xrightarrow{\sim} \ker [n] \times E \]
    given by $(x, y) \mapsto (y - x, x)$, and since $\ker [n]$ is a finite group (acting on $E$ by translation), it follows that $[n]$ is a Galois cover.
\end{example}
