\begin{topic}{homotopy-category}{homotopy category}
    Let $\mathcal{A}$ be an \tref{abelian-category}{abelian category}. The \textbf{homotopy category} $\textbf{K}(\mathcal{A})$ is defined to be the category whose objects are \tref{chain-complex}{chain complexes} in $\mathcal{A}$, and morphisms are chain maps modulo \tref{chain-homotopy}{homotopy}.
\end{topic}

\begin{topic}{derived-category}{derived category}
    Let $\mathcal{A}$ be an \tref{abelian-category}{abelian category}. The \textbf{derived category} $\textbf{D}(\mathcal{A})$ is obtained from the \tref{homotopy-category}{homotopy category} $\textbf{K}(\mathcal{A})$ by \tref{CT:localization}{localizing} with respect to quasi-isomorphisms. Concretely, a morphism from $A^\bdot$ to $B^\bdot$ is given by a roof
    \[ \begin{tikzcd}[column sep = 0.5em] & \arrow[swap]{ld}{f} C^\bdot \arrow{rd}{g} & \\ A^\bdot \arrow[dashed]{rr} & & B^\bdot , \end{tikzcd} \]
    where $f$ is a quasi-isomorphism, and we think of this roof as $g \circ f^{-1}$ (even though $f^{-1}$ might not exist).
    
    The derived category $\textbf{D}(\mathcal{A})$ naturally admits the structure of a \tref{triangulated-category}{triangulated category}: a triangle is distinguished if it is isomorphic to one of the form
    \[ A^\bdot \xrightarrow{f} B^\bdot \to C(f) \xrightarrow{\pi} A^\bdot[1] , \]
    where $C(f)$ is the \tref{mapping-cone}{mapping cone} of $f$.
\end{topic}

\begin{example}{derived-category}
    Let $0 \to A \xrightarrow{f} B \xrightarrow{g} C \to 0$ be a short exact sequence in $\mathcal{A}$. There is a natural morphism $h : C \to A[1]$ in $\textbf{D}(\mathcal{A})$ given by the following maps of complexes:
    \[ \begin{tikzcd} \cdots \arrow{r} & 0 \arrow{r} & C \arrow{r} & \cdots & C \arrow{dd}{h} \\ \cdots \arrow{r} & A \arrow{u} \arrow[swap]{d}{\id} \arrow{r}{f} & B \arrow{d} \arrow[swap]{u}{g} \arrow{r} & \cdots & \\ \cdots \arrow{r} & A \arrow{r} & 0 \arrow{r} & \cdots & A[1] , \end{tikzcd} \]
    since the upper map of complexes is a quasi-isomorphism. This quasi-isomorphism also immediately shows that
    \[ A \xrightarrow{f} B \xrightarrow{g} C \xrightarrow{\pi} A[1] \]
    is an exact triangle in $\textbf{D}(\mathcal{A})$.
    
    Moreover, this shows explicitly that $\textup{Ext}_\mathcal{A}^1(C, A) \isom \Hom_{\textbf{D}(\mathcal{A})}(C, A[1])$. In the converse direction, any map $h : C \to A[1]$ can be written as a roof
    \[ \begin{tikzcd} \cdots \arrow{r} & 0 \arrow{r} & C \arrow{r} & \cdots \\ \cdots \arrow{r} & B_0 \arrow{u} \arrow{d} \arrow{r} & B_1 \arrow{d} \arrow{u} \arrow{r} & \cdots \\ \cdots \arrow{r} & A \arrow{r} & 0 \arrow{r} & \cdots , \end{tikzcd} \]
    where the top map is a quasi-isomorphism. Then one can form the extension by pushout 
    \[ 0 \to A \to A \oplus_{B_0} B_1 \to C \to 0 . \]
    This construction can be generalized to show that $\textup{Ext}_{\mathcal{A}}^n(C, A) \isom \Hom_{\textbf{D}(\mathcal{A})}(C, A[n])$ for any $n$.
\end{example}

% \begin{topic}{Grothendieck--Verdier-duality}{Grothendieck--Verdier duality}
    
% \end{topic}

\begin{topic}{perfect-complex}{perfect complex}
    Let $R$ be a \tref{AA:ring}{commutative ring}. A \tref{chain-complex}{chain complex} of \tref{AA:module}{$R$-modules} is \textbf{perfect} if it is \tref{quasi-isomorphism}{quasi-isomorphic} to a bounded chain complex of \tref{AA:finitely-generated-module}{finitely generated} \tref{AA:projective-module}{projective} $R$-modules.
    
    An $R$-module is \textbf{perfect module} if it is perfect when seen as a chain complex concentrated at degree zero.
    
    A chain complex of \tref{AG:coherent-sheaf}{quasi-coherent sheaves} $\mathcal{F}$ over a \tref{AG:scheme}{scheme} $X$ is \textbf{perfect} if the (derived) pullback $\textup{L} f^* \mathcal{F}$ is perfect for all commutative rings $R$ and morphisms $f : \Spec(R) \to X$.
\end{topic}

\begin{topic}{fourier-mukai-transform}{Fourier--Mukai transform}
    Let $X$ and $Y$ be \tref{AG:smooth-morphism}{smooth} \tref{AG:projective-variety}{projective varieties}, and $\mathcal{P} \in \textbf{D}^\textup{b}(X \times Y)$ an object in the (bounded) \tref{derived-category}{derived category} of \tref{AG:coherent-sheaf}{coherent sheaves} on their product. Write $q : X \times Y \to X$ and $p : X \times Y \to Y$ for the projections. The \textbf{Fourier--Mukai transform} is the functor
    \[ \Phi_\mathcal{P} : \textbf{D}^\textup{b}(X) \to \textbf{D}^\textup{b}(Y), \quad \mathcal{E} \mapsto \textup{R} p_* \left( q^* \mathcal{E} \overset{\textup{L}}{\otimes} \mathcal{P} \right) . \]
    The object $\mathcal{P}$ is called the \textbf{Fourier--Mukai kernel} of $\Phi_\mathcal{P}$.
    
    Note that $\Phi_\mathcal{P}$ is \tref{exact-functor-triangulated}{exact} since $q^*, (-) \overset{\textup{L}}{\otimes} \mathcal{P}$ and $\textup{R} p_*$ are all exact.
\end{topic}

\begin{example}{fourier-mukai-transform}
    \begin{itemize}
        \item The identity functor $\id : \textbf{D}^\textup{b}(X) \to \textbf{D}^\textup{b}(X)$ is naturally isomorphic to the Fourier--Mukai transform with kernel the structure sheaf $\mathcal{O}_\Delta$ of the diagonal $\Delta \subset X \times X$. Indeed, if $\iota : X \xrightarrow{\sim} \Delta \subset X \times X$ is the diagonal, then
        \[ \begin{aligned}
            \Phi_{\mathcal{O}_\Delta}(\mathcal{E})
                &= \textup{R} p_* (q^* \mathcal{E} \overset{\textup{L}}{\otimes} \mathcal{O}_\Delta) \\
                &= \textup{R} p_* (q^* \mathcal{E} \overset{\textup{L}}{\otimes} \iota_* \mathcal{O}_X) \\
                &\isom \textup{R} p_* (\textup{R} \iota_* (\iota^* q^* \mathcal{E} \overset{\textup{L}}{\otimes} \mathcal{O}_X) \\
                &\isom \textup{R} (p \circ \iota)_* (q \circ \iota)^* \mathcal{E} \\
                &\isom \mathcal{E} ,
        \end{aligned} \]
        as $p \circ \iota = q \circ \iota = \id_X$, and where in the third line we used the \tref{AG:projection-formula}{projection formula}.
        
        \item More generally, given a morphism $f : X \to Y$, we have
        \[ \Phi_{\mathcal{O}_{\Gamma_f}} \isom f_* : \textbf{D}^\textup{b}(X) \to \textbf{D}^\textup{b}(Y) , \]
        where $\Gamma_f \subset X \times Y$ is the graph of $f$. In particular, cohomology $H^*(X, -)$ can be viewed as the Fourier--Mukai transform
        \[ \Phi_{\mathcal{O}_X} : \textbf{D}^\textup{b}(X) \to \textbf{D}^\textup{b}(\textbf{FinVect}_k) , \]
        where $X \subset X \times \Spec k$ is considered as the graph of $X \to \Spec k$.
        
        \item The shift functor $T : \textbf{D}^\textup{b}(X) \to \textbf{D}^\textup{b}(X)$ can be described as the Fourier--Mukai transform with kernel $\mathcal{O}_{\Delta}[1]$.
    \end{itemize}
\end{example}

\begin{topic}{serre-functor}{Serre functor}
    Let $\mathcal{C}$ be a $k$-linear category. A \textbf{Serre functor} is an auto-equivalence functor $S : \mathcal{C} \to \mathcal{C}$ such that there is a natural bijection
    \[ \Hom_\mathcal{C}(A, B) \xrightarrow{\sim} \Hom_\mathcal{C}(B, SA)^\vee \]
    for all $A, B$ in $\mathcal{C}$.
\end{topic}

\begin{example}{serre-functor}
    Let $F : \mathcal{C} \to \mathcal{D}$ be a functor between $k$-linear categories $\mathcal{C}$ and $\mathcal{D}$ admitting Serre functors $S_\mathcal{C}$ and $S_\mathcal{D}$. Assume $F$ has a left adjoint $G : \mathcal{D} \to \mathcal{C}$, i.e. $G \dashv F$. Then $F$ also has a right adjoint, given by
    \[ H = S_\mathcal{C} \circ G \circ S_\mathcal{D}^{-1} : \mathcal{D} \to \mathcal{C} . \]
    Namely,
    \[ \begin{aligned} \Hom_\mathcal{D}(Fx, y) &\isom \Hom_\mathcal{D}(S_\mathcal{D}^{-1} y, Fx)^\vee \isom \Hom_\mathcal{C}(G S_\mathcal{D}^{-1} y, x)^\vee \\ &\isom \Hom_\mathcal{C}(x, S_\mathcal{C} G S_\mathcal{D}^{-1} y) = \Hom_\mathcal{C}(x, H y) , \end{aligned} \]
    where every step is a natural bijection.
\end{example}

\begin{example}{serre-functor}
    Let $X$ be a \tref{AG:smooth-morphism}{smooth} \tref{AG:projective-variety}{projective variety} of dimension $n$. \tref{AG:serre-duality}{Serre duality} gives natural isomorphisms
    \[ \textup{Ext}_X^i(\mathcal{F}, \mathcal{G}) \isom H^i(X, \mathcal{F}^\vee \otimes \mathcal{G}) \isom H^{n - i}(X, \mathcal{F} \otimes \mathcal{G}^\vee \otimes \omega_X) \isom \textup{Ext}_X^{n - 1}(\mathcal{G}, \mathcal{F} \otimes \omega_X)^\vee , \]
    for coherent sheaves $\mathcal{F}, \mathcal{G}$ on $X$. In the \tref{derived-category}{derived category} $\textbf{D}^\textup{b}(X)$ of coherent sheaves on $X$, this can be rewritten as
    \[ \Hom_{\textbf{D}^\textup{b}(X)}(\mathcal{F}, \mathcal{G}[i]) \isom \Hom_{\textbf{D}^\textup{b}(X)}(\mathcal{G}[i], \mathcal{F} \otimes \omega_X[n])^\vee \]
    This shows that $\textbf{D}^\textup{b}(X)$ admits a Serre functor given by
    \[ S_X : \textbf{D}^\textup{b}(X) \to \textbf{D}^\textup{b}(X), \qquad \mathcal{F} \mapsto \mathcal{F} \otimes \omega_X[n] . \]
\end{example}
